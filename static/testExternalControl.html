<html>
    <head>
        
        <style>
            body {
                display: flex;
                flex-direction: column;
                height: 100%;
                overflow: hidden;
            }
            .frame {
                flex-grow: 1;
            }
            
            #results {
                position: absolute;
                top:0;
                left:0;
                background-color: white;
                z-index: 10;
            }
        </style>
        
        
        <script src="https://ffbeEquip.com/externalControl.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.0.min.js"
                integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="results"></div>
        <iframe id="ffbeEquipIframe" class="frame"></iframe>
        
        <script>
            let units = [["Gabranth","212001105"],
                ["Gladiolus","215000205"],
                ["Chow","401003805"],
                ["Demon Rain","401000205"],
                ["Gilgamesh","205000805"],
                ["Noctis","215000105"],
                ["Wilhelm","100006105"],
                ["Sieghard","100017905"],
                ["Beryl","401004805"],
                ["Warrior of Dawn Galuf","205001005"],
                ["Olberic","334000205"],
                ["Karten","401007205"],
                ["Awakened Rain","100015805"],
                ["Garland v2","201000505"],
                ["Sacred Shield Charlotte","100021705"],
                ["Viktor Marchenko","401005005"],
                ["Raegen","100010005"],
                ["Ignacio","100018705"],
                ["CG Warrior of Light","201000405"],
                ["Zeno of the Beta Star","401007605"],
                ["Eleven","337000105"],
                ["Fayt","318000105"],
                ["Adventurer Locke","206002205"],
                ["A.I. Katy","401007405"],
                ["Fohlen","100006805"],
                ["Wild Rose Firion","202001605"],
                ["Godrea","401008605"],
                ["Pyro Glacial Lasswell","100011705"],
                ["Aloha Lasswell","401005305"],
                ["Monk Sabin of Kolts","206002005"],
                ["Lilith","401005905"],
                ["Red XIII","207000505"],
                ["Assassin Shadow","206002405"],
                ["Emperor Shera","100013305"],
                ["Riku","335000405"],
                ["Basch","212000905"],
                ["Flammie","304000405"],
                ["Fryevia","302001405"],
                ["Summer Fina & Lid","100020505"],
                ["Holy Night Amelia & Emilia","100022705"],
                ["Dark Knight Leon","202001705"],
                ["Elena","401008405"],
                ["Esther","401006805"],
                ["Akstar","100020005"],
                ["Citan","331000705"],
                ["Lunera","100007505"],
                ["Lucius","401006005"],
                ["Zack","207001105"],
                ["Aldore King Rain","100023205"],
                ["Cloud","207000105"],
                ["Cloud (KH)","335000205"],
                ["Fei","331000105"],
                ["Sephiroth (KH)","335000305"],
                ["Sora","335000105"],
                ["Loren","100009105"],
                ["Warrior of Light Bartz","205001105"],
                ["Veritas of the Flame","100008005"],
                ["Tidus","210000105"],
                ["Shadow Lord","211000905"],
                ["Squall","208000105"],
                ["Lilikin Squall","257000305"],
                ["Arngrim","330000305"],
                ["Vincent","207000805"],
                ["Veritas of the Dark","100007705"],
                ["Cid","100019505"],
                ["A2","401001205"],
                ["Jecht","210001005"],
                ["Auron","210000605"],
                ["2B","310000105"],
                ["Yego","100019205"],
                ["Ignis","215000505"],
                ["Atoning Dragoon Kain","204001605"],
                ["Estark","306000905"],
                ["Adam Jensen","401004905"],
                ["Sephiroth","207001005"],
                ["Dragonlord","306000105"],
                ["Aerith","207000405"],
                ["Mercenary Ramza","253000115"],
                ["Ang","401003905"],
                ["Ellesperis","401004705"],
                ["Hyoh","100016205"],
                ["Lightning","213000105"],
                ["Crimson","100020605"],
                ["White Knight Noel","302000705"],
                ["Yun","302000905"],
                ["Bai Hu & Zhu Que","401006705"],
                ["Aileen","100005905"],
                ["Kimono Ayaka","100021905"],
                ["Tifa","207000305"],
                ["Nagi","100019105"],
                ["Dressy Aileen","100022005"],
                ["Yuffie","207000605"],
                ["Randi","304000105"],
                ["Roy","100010405"],
                ["Balthier","212000505"],
                ["Onion Knight","203000105"],
                ["Sweet Nichol","100024105"],
                ["King Edgar of Figaro","206001905"],
                ["Jiraiya","100011305"],
                ["Aranea","215000605"],
                ["Beatrix","209001105"],
                ["Tsukiko","401007105"],
                ["Prompto","215000705"],
                ["Chocobo Fina","100022205"],
                ["Zargabaath","401001105"],
                ["Luneth","203000205"],
                ["Onion Knight Refia","203001305"],
                ["Nalu","100015405"],
                ["Nyx","215001105"],
                ["Dark Knight Cecil","204000115"],
                ["Duke","100010805"],
                ["Faisalith","100022805"],
                ["Radiant Lightning","213001005"],
                ["Sweet Luka","100024205"],
                ["Lenneth","330000105"],
                ["Elephim","100017105"],
                ["Kryla","401002705"],
                ["Sol","100022305"],
                ["Archmage Kefka","206002305"],
                ["Orlandeau","253000805"],
                ["Beowulf","253001005"],
                ["Reberta","401001705"],
                ["Dark Mage Exdeath","205000905"],
                ["Prishe","211000405"],
                ["Bart","331000405"],
                ["Veritas of the Light","100008205"],
                ["Nameless Gunner Jake","100012005"],
                ["Ramza","253000105"],
                ["Queen","254000205"],
                ["Elfreeda","100009805"],
                ["Qin","401006605"],
                ["Ray Jack","307000105"],
                ["Mordegon","337000505"],
                ["Marquis de LÃ©on","306001005"],
                ["Myra","401004505"],
                ["Karlette","100019905"],
                ["Malphasie","401004605"],
                ["Aurora Fryevia","401006405"],
                ["Regina","100017505"],
                ["CG Majin Fina","100023305"],
                ["Kimono Fina","100024305"],
                ["Machina","254001805"],
                ["Dark Knight Luneth","203001405"],
                ["Warrior of Light Lenna","205001205"],
                ["Serena","337000305"],
                ["Ace","254000105"],
                ["Heavenly Technician Lid","100011905"],
                ["Felix","401006105"],
                ["Citra","100016905"],
                ["Seaside Nichol","401005405"],
                ["Kunshira","100012605"],
                ["Kurasame","254001905"],
                ["Blossom Sage Sakura","100012405"],
                ["Emperor","202000505"],
                ["Yuna","210000205"],
                ["Lilikin Yuna","257000205"],
                ["Cantilena","100024705"],
                ["Sylvie","401006905"],
                ["Delita","253000205"],
                ["Knight Delita","253000215"],
                ["Rinoa","208000205"],
                ["Freya (VP)","330000205"],
                ["Yuraisha","100017605"],
                ["Marie","100005805"],
                ["Christine","401002605"],
                ["Dark Fina","100000315"],
                ["Seabreeze Dark Fina","100007205"],
                ["Olive","302001305"],
                ["Black Mage Golbez","204001705"],
                ["Veronica","337000205"],
                ["Eiko","209000705"],
                ["Rem","254000905"],
                ["Summer Folka & Citra","100020905"],
                ["Barbariccia","401001405"],
                ["Rena","317000105"],
                ["Sophia","401006505"],
                ["Mediena","100014005"],
                ["Ayaka","100008605"],
                ["Lila","100013805"],
                ["Primrose","334000105"],
                ["Rivera","401007705"],
                ["Maritime Strategist Nichol","100012505"],
                ["Kaito","401008505"],
                ["Magitek Warrior Terra","206002105"],
                ["Lotus Mage Fina","100011805"],
                ["Trance Terra","206000125"],
                ["Circe","401004405"],
                ["Tiana","401006205"],
                ["High Seraph Ultima","253001305"],
                ["Lulu","210000405"],
                ["Folka","100018305"],
                ["Elly","331000205"],
                ["Dracu Lasswell","401000305"],
                ["Morgana","401007005"],
                ["Neverending Hope","213001105"],
                ["Pure Summoner Rydia","204001505"],
                ["Grim Lord Sakura","401002005"],
                ["Warrior of Light Krile","205001305"],
                ["Maria (Xenogears)","331000805"],
                ["Vagrant Knight Rain","100015005"],
                ["Tiz","313000105"],
                ["Explorer Aileen","401003505"],
                ["Lovely Katy","401007505"],
                ["Vargas","302000405"],
                ["Maxwell","302000505"],
                ["Ray Jack","401002905"],
                ["Rico Rodriguez","401004005"],
                ["Popstar Katy","401006305"],
                ["Immortal Flame Katy","401007305"],
                ["Elza","302000605"],
                ["Lara Croft","401003605"],
                ["Ukiyo","100016605"],
                ["Bravo Bunny AgnÃ¨s","313000305"],
                ["AgnÃ¨s","313000205"],
                ["Charming Kitty Ariana","401002405"],
                ["Kelsus","100009405"],
                ["Livid Shantotto","211000805"],
                ["Y'shtola","214000105"],
                ["Madam","100014905"]
            ];
            let unitIndex = 0;
            
            $(function() {    
                let iframe = document.getElementById('ffbeEquipIframe');
                FFBEEquipExternalControl.init(iframe, true)
                    .then(() => FFBEEquipExternalControl.setMonsterStats(1000, 1000))
                    .then(() => FFBEEquipExternalControl.setMonsterRaces(['dragon']))
                    .then(recursivelySelectUnitAndBuild);
            });
            
            let recursivelySelectUnitAndBuild = function() {
                FFBEEquipExternalControl.selectUnit(units[unitIndex][1])
                    .then(() => FFBEEquipExternalControl.selectGoal("HP"))
                    .then(() => FFBEEquipExternalControl.setPot('hp', 1500))
                    .then(() => FFBEEquipExternalControl.build())
                    .then((result) => {
                        $("#results").append($('<div>' + units[unitIndex][0] + ' - ' + result.units[0].calculatedValues.hp.value + '</div>'));
                        unitIndex++;
                        if (unitIndex < units.length) {
                            recursivelySelectUnitAndBuild();
                        }
                    });
            }
        </script>
    </body>
</html>
